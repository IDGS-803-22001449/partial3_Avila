{% extends "layout.html" %}
{% block container %}
<style>
    @keyframes inputFocus {
        0% {
            opacity: 0;
            transform: translateY(10px);
        }

        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .input-animate {
        animation: inputFocus 0.3s ease-in-out;
    }

    .peer:focus~.input-animate,
    .peer:valid~.input-animate {
        animation: inputFocus 0.3s ease-in-out;
    }

    input:placeholder-shown~.input-animate {
        top: 10px;
        left: 0;
        font-size: 1rem;
        color: #aaa;
    }

    input:valid~.input-animate,
    input:focus~.input-animate {
        top: -6px;
        left: 0;
        font-size: 0.75rem;
        color: #1E40AF;
    }
</style>

<div class="container mx-auto p-4">

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="mb-4">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} text-white px-6 py-3 border-0 rounded relative mb-4">
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}


    <form class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md dark:bg-gray-800" method="post">

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="relative">
                <input type="text" name="nombre" id="nombre"
                    class="peer block w-full py-2.5 px-0 text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600"
                    placeholder=" " required />
                <label for="nombre"
                    class="absolute left-0 -top-6 text-sm text-gray-500 dark:text-gray-400 input-animate">Nombre</label>
            </div>

            <div class="relative">
                <input type="text" name="direccion" id="direccion"
                    class="peer block w-full py-2.5 px-0 text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600"
                    placeholder=" " required />
                <label for="direccion"
                    class="absolute left-0 -top-6 text-sm text-gray-500 dark:text-gray-400 input-animate">Dirección</label>
            </div>

            <div class="relative">
                <input type="text" name="telefono" id="telefono"
                    class="peer block w-full py-2.5 px-0 text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600"
                    placeholder=" " required />
                <label for="telefono"
                    class="absolute left-0 -top-6 text-sm text-gray-500 dark:text-gray-400 input-animate">Teléfono</label>
            </div>

            <div class="relative">
                <input type="text" name="numeroPizzas" id="numPizzas"
                    class="peer block w-full py-2.5 px-0 text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600"
                    placeholder=" " required />
                <label for="numPizzas"
                    class="absolute left-0 -top-6 text-sm text-gray-500 dark:text-gray-400 input-animate">Número de
                    pizzas</label>
            </div>

            <div class="relative" style="margin-top: 1rem;">
                <input type="date" name="fechaPedido" id="fechaPedido"
                    class="peer block w-full py-2.5 px-0 text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600"
                    value="{{ fechaPedido.strftime('%Y-%m-%d') if fechaPedido else '' }}" required />
                <label for="fechaPedido"
                    class="absolute left-0 -top-6 text-sm text-gray-500 dark:text-gray-400 input-animate">Fecha de
                    pedido</label>
            </div>
        </div>


        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <fieldset>
                <legend class="text-lg font-semibold mb-4 dark:text-white">Tamaño Pizza</legend>
                <div class="space-y-2">
                    <div class="flex items-center">
                        <input id="size-small" type="radio" name="tamanopizza" value="Chica"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="size-small" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">Chica
                            $40</label>
                    </div>
                    <div class="flex items-center">
                        <input id="size-medium" type="radio" name="tamanopizza" value="Mediana"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="size-medium"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">Mediana $80</label>
                    </div>
                    <div class="flex items-center">
                        <input id="size-large" type="radio" name="tamanopizza" value="Grande"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="size-large" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">Grande
                            $120</label>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend class="text-lg font-semibold mb-4 dark:text-white">Ingredientes</legend>
                <div class="space-y-2">
                    <div class="flex items-center">
                        <input id="ingredient-ham" type="checkbox" name="ingredientes" value="Jamón"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="ingredient-ham"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">Jamón $10</label>
                    </div>
                    <div class="flex items-center">
                        <input id="ingredient-pineapple" type="checkbox" name="ingredientes" value="Piña"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="ingredient-pineapple"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">Piña $10</label>
                    </div>
                    <div class="flex items-center">
                        <input id="ingredient-mushrooms" type="checkbox" name="ingredientes" value="Champiñones"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="ingredient-mushrooms"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">Champiñones $10</label>
                    </div>
                </div>
            </fieldset>
        </div>


        <button type="submit"
            class="w-full bg-blue-700 hover:bg-blue-800 text-white font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700">
            Agregar
        </button>
    </form>

    <div class="max-w-4xl mx-auto mt-6">
        <div class="bg-white p-6 rounded-lg shadow-md dark:bg-gray-800">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">Resumen de Pedidos</h2>
            {% for pedido in pedidos %}
            <p class="mb-2 text-gray-900 dark:text-white">Precio pizza: ${{ pedido.subtotal }}</p>
            {% endfor %}
            <p class="text-lg font-semibold text-gray-900 dark:text-white">TOTAL: ${{ total }}</p>
        </div>
    </div>

    <div class="max-w-4xl mx-auto mt-6">
        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">Tamaño</th>
                    <th scope="col" class="px-6 py-3">Ingredientes</th>
                    <th scope="col" class="px-6 py-3">Número de Pizzas</th>
                    <th scope="col" class="px-6 py-3">Subtotal</th>
                    <th scope="col" class="px-6 py-3">Fecha de Pedido</th>
                </tr>
            </thead>
            <tbody>
                {% for pedido in pedidos %}
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                    <td class="px-6 py-4">{{ pedido.tamanopizza }}</td>
                    <td class="px-6 py-4">{{ pedido.ingredientes | join(', ') }}</td>
                    <td class="px-6 py-4">{{ pedido.numeroPizzas }}</td>
                    <td class="px-6 py-4">${{ pedido.subtotal }}</td>
                    <td class="px-6 py-4">{{ pedido.fechaPedido.strftime('%d-%m-%Y') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="max-w-4xl mx-auto mt-6">
        <form action="{{ url_for('importarPedidos') }}" method="post" class="mb-4">
            <button type="submit"
                class="w-full bg-green-700 hover:bg-green-800 text-white font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-green-600 dark:hover:bg-green-700">
                Terminar
            </button>
        </form>
        <form action="{{ url_for('eliminarPedido') }}" method="post">
            <button type="submit"
                class="w-full bg-green-700 hover:bg-green-800 text-white font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-green-600 dark:hover:bg-green-700">
                Quitar
            </button>
        </form>
    </div>
</div>
{% endblock %}